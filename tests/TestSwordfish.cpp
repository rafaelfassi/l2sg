#include "Test.h"

bool test(const std::string &puzzle, const std::string &board, const std::string &expectedBoard)
{
    Grid grid;
    grid.fillBoard(board);

    solver::techniques::swordfish(grid);

    return checkAll(puzzle, grid, board, expectedBoard);
}

int main(int, char **)
{
    // Swordfish row for value 2 at:
    // (1,0) (1,3) .....
    // (2,0) ..... (2,8)
    // ..... (7,3) (7,8)
    if (!test("8.4...1.5.16.85794.9.4.183...25.96....9.3....6518.79.3.437.8.1.168.5437.9.......8",
              R"(
                .--------------.---------------.---------------.
                | 8    237  4  | 2369  79  236 | 1    26    5  |
                | 23   1    6  | 23    8   5   | 7    9     4  |
                | 257  9    57 | 4     67  1   | 8    3     26 |
                :--------------+---------------+---------------:
                | 347  378  2  | 5     14  9   | 6    48    17 |
                | 47   78   9  | 126   3   26  | 245  2458  17 |
                | 6    5    1  | 8     24  7   | 9    24    3  |
                :--------------+---------------+---------------:
                | 25   4    3  | 7     69  8   | 25   1     69 |
                | 1    6    8  | 29    5   4   | 3    7     29 |
                | 9    27   57 | 1236  12  236 | 245  2456  8  |
                '--------------'---------------'---------------'
              )",
              R"(
                .--------------.--------------.---------------.
                | 8    237  4  | 369  79  236 | 1    26    5  |
                | 23   1    6  | 23   8   5   | 7    9     4  |
                | 257  9    57 | 4    67  1   | 8    3     26 |
                :--------------+--------------+---------------:
                | 347  378  2  | 5    14  9   | 6    48    17 |
                | 47   78   9  | 16   3   26  | 245  2458  17 |
                | 6    5    1  | 8    24  7   | 9    24    3  |
                :--------------+--------------+---------------:
                | 5    4    3  | 7    69  8   | 25   1     69 |
                | 1    6    8  | 29   5   4   | 3    7     29 |
                | 9    27   57 | 136  12  236 | 245  2456  8  |
                '--------------'--------------'---------------'
              )"))
        return failed();

    // Swordfish column for value 7 at:
    // (0,1) (0,4) .....
    // (5,1) ..... (5,7)
    // ..... (8,4) (8,7)
    if (!test("..9..6.4.....1.76..65.42.98396.85.2..52.6.98....29...664..5.23...7.2.6...2.6..8..",
              R"(
                .-----------------.------------------.------------------.
                | 1278  1378  9   | 58     37  6     | 135   4    1235  |
                | 248   38    348 | 589    1   89    | 7     6    235   |
                | 17    6     5   | 37     4   2     | 13    9    8     |
                :-----------------+------------------+------------------:
                | 3     9     6   | 147    8   5     | 14    2    17    |
                | 147   5     2   | 1347   6   1347  | 9     8    137   |
                | 1478  178   148 | 2      9   1347  | 1345  157  6     |
                :-----------------+------------------+------------------:
                | 6     4     18  | 1789   5   1789  | 2     3    179   |
                | 59    138   7   | 13489  2   13489 | 6     15   1459  |
                | 59    2     13  | 6      37  13479 | 8     157  14579 |
                '-----------------'------------------'------------------'
              )",
              R"(
                .----------------.------------------.-----------------.
                | 128  1378  9   | 58     37  6     | 135   4    1235 |
                | 248  38    348 | 589    1   89    | 7     6    235  |
                | 17   6     5   | 37     4   2     | 13    9    8    |
                :----------------+------------------+-----------------:
                | 3    9     6   | 147    8   5     | 14    2    17   |
                | 147  5     2   | 1347   6   1347  | 9     8    137  |
                | 148  178   148 | 2      9   134   | 1345  157  6    |
                :----------------+------------------+-----------------:
                | 6    4     18  | 1789   5   1789  | 2     3    179  |
                | 59   138   7   | 13489  2   13489 | 6     15   1459 |
                | 59   2     13  | 6      37  1349  | 8     157  1459 |
                '----------------'------------------'-----------------'
              )"))
        return failed();

    // Swordfish row for value 2 at:
    // (1,0) (1,4) .....
    // ..... (2,4) (2,7)
    // (8,0) ..... (8,7)
    // Swordfish column for value 2 at:
    // (0,2) ..... (0,8)
    // ..... (6,3) (6,8)
    // (7,2) (7,3) .....
    if (!test("16.543.7..786.14354358.76.172.458.696..912.57...376..4.16.3..4.3...8..16..71645.3",
              R"(
                .----------------.------------.---------------.
                | 1     6    29  | 5   4   3  | 289   7    28 |
                | 29    7    8   | 6   29  1  | 4     3    5  |
                | 4     3    5   | 8   29  7  | 6     29   1  |
                :----------------+------------+---------------:
                | 7     2    13  | 4   5   8  | 13    6    9  |
                | 6     48   34  | 9   1   2  | 38    5    7  |
                | 589   589  19  | 3   7   6  | 128   28   4  |
                :----------------+------------+---------------:
                | 2589  1    6   | 27  3   59 | 2789  4    28 |
                | 3     459  249 | 27  8   59 | 279   1    6  |
                | 289   89   7   | 1   6   4  | 5     289  3  |
                '----------------'------------'---------------'
              )",
              R"(
                .---------------.------------.---------------.
                | 1    6    29  | 5   4   3  | 89   7    28  |
                | 29   7    8   | 6   29  1  | 4     3    5  |
                | 4    3    5   | 8   29  7  | 6     29   1  |
                :---------------+------------+---------------:
                | 7    2    13  | 4   5   8  | 13    6    9  |
                | 6    48   34  | 9   1   2  | 38    5    7  |
                | 589  589  19  | 3   7   6  | 128   8    4  |
                :---------------+------------+---------------:
                | 589  1    6   | 27  3   59 | 789  4    28  |
                | 3    459  249 | 27  8   59 | 79   1    6   |
                | 289  89   7   | 1   6   4  | 5     289  3  |
                '---------------'------------'---------------'
              )"))
        return failed();

    // Swordfish column for value 1 at:
    // (1,1) ..... (1,6)
    // ..... (2,5) (2,6)
    // (4,1) (4,5) .....
    if (!test("76..984353.4675.8959843..76.56.493272...5.9644.9.6.8519..52461.64.3.759...59.674.",
              R"(
                .-------------.-------------.-----------.
                | 7   6    12 | 12   9   8  | 4   3  5  |
                | 3   12   4  | 6    7   5  | 12  8  9  |
                | 5   9    8  | 4    3   12 | 12  7  6  |
                :-------------+-------------+-----------:
                | 18  5    6  | 18   4   9  | 3   2  7  |
                | 2   18   37 | 178  5   13 | 9   6  4  |
                | 4   37   9  | 27   6   23 | 8   5  1  |
                :-------------+-------------+-----------:
                | 9   378  37 | 5    2   4  | 6   1  38 |
                | 6   4    12 | 3    18  7  | 5   9  28 |
                | 18  23   5  | 9    18  6  | 7   4  23 |
                '-------------'-------------'-----------'
              )",
              R"(
                .-------------.------------.-----------.
                | 7   6    12 | 12  9   8  | 4   3  5  |
                | 3   12   4  | 6   7   5  | 12  8  9  |
                | 5   9    8  | 4   3   12 | 12  7  6  |
                :-------------+------------+-----------:
                | 18  5    6  | 18  4   9  | 3   2  7  |
                | 2   18   37 | 78  5   13 | 9   6  4  |
                | 4   37   9  | 27  6   23 | 8   5  1  |
                :-------------+------------+-----------:
                | 9   378  37 | 5   2   4  | 6   1  38 |
                | 6   4    12 | 3   18  7  | 5   9  28 |
                | 18  23   5  | 9   18  6  | 7   4  23 |
                '-------------'------------'-----------'
              )"))
        return failed();

    // Swordfish row for value 3 at:
    // (1,1) (1,4) (1,6)
    // ..... (6,4) (6,6)
    // (7,1) (7,4) .....
    if (!test("985.1..7.1.49.6.58.6..5819.793165842428.9..1.6512849378465.1.295..6.9481.1984..6.",
              R"(
                .------------.---------------.-------------.
                | 9   8   5  | 34   1    23  | 236  7  346 |
                | 1   37  4  | 9    237  6   | 23   5  8   |
                | 23  6   27 | 347  5    8   | 1    9  34  |
                :------------+---------------+-------------:
                | 7   9   3  | 1    6    5   | 8    4  2   |
                | 4   2   8  | 37   9    37  | 56   1  56  |
                | 6   5   1  | 2    8    4   | 9    3  7   |
                :------------+---------------+-------------:
                | 8   4   6  | 5    37   1   | 37   2  9   |
                | 5   37  27 | 6    23   9   | 4    8  1   |
                | 23  1   9  | 8    4    237 | 357  6  35  |
                '------------'---------------'-------------'
              )",
              R"(
                .------------.---------------.------------.
                | 9   8   5  | 34   1    23  | 26  7  346 |
                | 1   37  4  | 9    237  6   | 23  5  8   |
                | 23  6   27 | 347  5    8   | 1   9  34  |
                :------------+---------------+------------:
                | 7   9   3  | 1    6    5   | 8   4  2   |
                | 4   2   8  | 37   9    37  | 56  1  56  |
                | 6   5   1  | 2    8    4   | 9   3  7   |
                :------------+---------------+------------:
                | 8   4   6  | 5    37   1   | 37  2  9   |
                | 5   37  27 | 6    23   9   | 4   8  1   |
                | 23  1   9  | 8    4    237 | 57  6  35  |
                '------------'---------------'------------'
              )"))
        return failed();

    // Swordfish row for value 1 at:
    // (0,0) (0,2) .....
    // (3,0) (3,2) (3,6)
    // (8,0) (8,2) (8,6)
    if (!test(".4.3.5.2...7.4.3.1...1.8..4.9...6.48..4...7..5..4...9.4..5.....8.3.1.4...6.8.4.3.",
              R"(
                .-------------------.-------------------.--------------------.
                | 169   4      1689 | 3     679    5    | 689    2     679   |
                | 269   58     7    | 269   4      29   | 3      58    1     |
                | 2369  235    2569 | 1     2679   8    | 569    567   4     |
                :-------------------+-------------------+--------------------:
                | 1237  9      12   | 27    235    6    | 125    4     8     |
                | 1236  1238   4    | 29    23589  1239 | 7      156   2356  |
                | 5     12378  1268 | 4     238    1237 | 126    9     236   |
                :-------------------+-------------------+--------------------:
                | 4     127    129  | 5     2369   2379 | 12689  1678  2679  |
                | 8     257    3    | 2679  1      279  | 4      567   25679 |
                | 1279  6      1259 | 8     29     4    | 1259   3     2579  |
                '-------------------'-------------------'--------------------'
              )",
              R"(
                .-------------------.-------------------.-------------------.
                | 169   4      1689 | 3     679    5    | 689   2     679   |
                | 269   58     7    | 269   4      29   | 3     58    1     |
                | 2369  235    2569 | 1     2679   8    | 569   567   4     |
                :-------------------+-------------------+-------------------:
                | 1237  9      12   | 27    235    6    | 125   4     8     |
                | 236   1238   4    | 29    23589  1239 | 7     156   2356  |
                | 5     12378  268  | 4     238    1237 | 26    9     236   |
                :-------------------+-------------------+-------------------:
                | 4     127    29   | 5     2369   2379 | 2689  1678  2679  |
                | 8     257    3    | 2679  1      279  | 4     567   25679 |
                | 1279  6      1259 | 8     29     4    | 1259  3     2579  |
                '-------------------'-------------------'-------------------'
              )"))
        return failed();

    // Swordfish row for value 6 at:
    // (1,0) ..... (1,7)
    // (5,0) (5,1) .....
    // (6,0) (6,1) (6,7)
    if (!test("1......3.....17..25....49..8..9.62..9..47.3.6..71.2.95..18..7.47..6....9.5.7....3",
              R"(
                .----------------.--------------.--------------.
                | 1    27   24   | 25  69   89  | 456  3    78 |
                | 346  89   89   | 35  1    7   | 45   46   2  |
                | 5    367  236  | 23  68   4   | 9    17   18 |
                :----------------+--------------+--------------:
                | 8    14   35   | 9   35   6   | 2    47   17 |
                | 9    12   25   | 4   7    58  | 3    18   6  |
                | 346  346  7    | 1   38   2   | 48   9    5  |
                :----------------+--------------+--------------:
                | 236  369  1    | 8   259  359 | 7    256  4  |
                | 7    348  348  | 6   245  135 | 18   258  9  |
                | 246  5    4689 | 7   249  19  | 168  268  3  |
                '----------------'--------------'--------------'
              )",
              R"(
                .----------------.--------------.--------------.
                | 1    27   24   | 25  69   89  | 456  3    78 |
                | 346  89   89   | 35  1    7   | 45   46   2  |
                | 5    37   236  | 23  68   4   | 9    17   18 |
                :----------------+--------------+--------------:
                | 8    14   35   | 9   35   6   | 2    47   17 |
                | 9    12   25   | 4   7    58  | 3    18   6  |
                | 346  346  7    | 1   38   2   | 48   9    5  |
                :----------------+--------------+--------------:
                | 236  369  1    | 8   259  359 | 7    256  4  |
                | 7    348  348  | 6   245  135 | 18   258  9  |
                | 24   5    4689 | 7   249  19  | 168  28   3  |
                '----------------'--------------'--------------'
              )"))
        return failed();

    // Swordfish column for value 9 at:
    // (1,3) (1,4) .....
    // ..... (3,4) (3,6)
    // (6,3) ..... (6,6)
    if (!test("816.3.4.973....8..59.8..3.72476.8.35.53.2.68468.4537..328.75.46.6.28457347536.2.8",
              R"(
                .-----------.--------------.--------------.
                | 8   1  6  | 57   3   27  | 4   25    9  |
                | 7   3  24 | 159  49  269 | 8   1256  12 |
                | 5   9  24 | 8    14  126 | 3   126   7  |
                :-----------+--------------+--------------:
                | 2   4  7  | 6    19  8   | 19  3     5  |
                | 19  5  3  | 17   2   179 | 6   8     4  |
                | 6   8  19 | 4    5   3   | 7   129   12 |
                :-----------+--------------+--------------:
                | 3   2  8  | 19   7   5   | 19  4     6  |
                | 19  6  19 | 2    8   4   | 5   7     3  |
                | 4   7  5  | 3    6   19  | 2   19    8  |
                '-----------'--------------'--------------'
              )",
              R"(
                .-----------.--------------.--------------.
                | 8   1  6  | 57   3   27  | 4   25    9  |
                | 7   3  24 | 159  49  26  | 8   1256  12 |
                | 5   9  24 | 8    14  126 | 3   126   7  |
                :-----------+--------------+--------------:
                | 2   4  7  | 6    19  8   | 19  3     5  |
                | 19  5  3  | 17   2   179 | 6   8     4  |
                | 6   8  19 | 4    5   3   | 7   129   12 |
                :-----------+--------------+--------------:
                | 3   2  8  | 19   7   5   | 19  4     6  |
                | 19  6  19 | 2    8   4   | 5   7     3  |
                | 4   7  5  | 3    6   19  | 2   19    8  |
                '-----------'--------------'--------------'
              )"))
        return failed();

    // Swordfish column for value 8 at:
    // (2,0) (2,2) .....
    // ..... (3,2) (3,7)
    // (6,0) ..... (6,7)
    if (!test(".572...312.15738.....41957251.6.2..7..2.4531....7.1625..532.1..1.6.5.2.332.1..75.",
              R"(
                .--------------.---------------.----------------.
                | 49  5     7  | 2   68   68   | 49  3     1    |
                | 2   49    1  | 5   7    3    | 8   469   469  |
                | 68  368   38 | 4   1    9    | 5   7     2    |
                :--------------+---------------+----------------:
                | 5   1     38 | 6   389  2    | 49  48    7    |
                | 67  67    2  | 89  4    5    | 3   1     89   |
                | 49  38    49 | 7   38   1    | 6   2     5    |
                :--------------+---------------+----------------:
                | 78  4789  5  | 3   2    4678 | 1   4689  4689 |
                | 1   4789  6  | 89  5    478  | 2   49    3    |
                | 3   2     49 | 1   689  468  | 7   5     468  |
                '--------------'---------------'----------------'
              )",
              R"(
                .--------------.--------------.---------------.
                | 49  5     7  | 2   68   68  | 49  3     1   |
                | 2   49    1  | 5   7    3   | 8   469   469 |
                | 68  36    38 | 4   1    9   | 5   7     2   |
                :--------------+--------------+---------------:
                | 5   1     38 | 6   39   2   | 49  48    7   |
                | 67  67    2  | 89  4    5   | 3   1     89  |
                | 49  38    49 | 7   38   1   | 6   2     5   |
                :--------------+--------------+---------------:
                | 78  479   5  | 3   2    467 | 1   4689  469 |
                | 1   4789  6  | 89  5    478 | 2   49    3   |
                | 3   2     49 | 1   689  468 | 7   5     468 |
                '--------------'--------------'---------------'
              )"))
        return failed();

    return passed();
}